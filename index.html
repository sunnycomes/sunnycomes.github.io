
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>I/O VIsion</title>
  <meta name="author" content="Sunny">

  
  <meta name="description" content="This post is from here. Thanks to the origin author.
Markdown was created to be easy to read, easy to write, and still readable in plain text format &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.iovi.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="I/O VIsion" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43860851-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">I/O VIsion</a></h1>
  
    <h2>Do one thing at a time, and do well.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.iovi.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">


<li><a href="/">Home</a></li>

<li><a href="/blog/categories/web-server">Web&Server</a></li>

<li><a href="/blog/categories/coding">Coding</a></li>

<!--
	Commented out for present.
<li><a href="/blog/categories/data-mining">Data Mining</a></li>

<li><a href="/blog/bookrack ">Bookrack</a></li>

-->

<li><a href="/blog/categories/stuff">Stuff</a></li>



<li><a href="/blog/archives">Archives</a></li>

<li><a href="/about ">About</a></li>


</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/30/simple-guide-for-markdown/">Markdown Syntax Guide</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-30T21:35:48+08:00" pubdate data-updated="true">Nov 30<span>th</span>, 2013</time>
        
           | <a href="/blog/2013/11/30/simple-guide-for-markdown/#disqus_thread"
             data-disqus-identifier="http://www.iovi.com/blog/2013/11/30/simple-guide-for-markdown/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post is from <a href="http://sourceforge.net/p/forge/documentation/markdown_syntax/#md_ex_links" title="thanks to the origin author.">here</a>. Thanks to the origin author.
Markdown was created to be easy to read, easy to write, and still readable in plain text format.</p>

<ol>
<li><a href="#links">Links</a></li>
<li><a href="#reference_links">Reference Links</a></li>
<li><a href="#artifact_links">Artifact Links</a></li>
<li><a href="#basic_text_formatting">Basic Text Formatting</a></li>
<li><a href="#blockquotes">Blockquotes</a></li>
<li><a href="#preformatted_text">Preformatted Text</a></li>
<li><a href="#lists">Lists</a></li>
<li><a href="#tables">Tables</a>(We will talk about this feature)</li>
<li>Headers(Removed)</li>
<li><a href="#more_headers">More Headers</a></li>
<li><a href="#horizontal_rules">Horizontal Rules</a></li>
<li><a href="#images">Images</a></li>
<li>Videos(Removed)</li>
<li><a href="#escapes_and_html">Escapes and HTML</a></li>
<li>Table of Contents(Removed)</li>
<li><a href="#code_highlighting">Code Highlighting</a></li>
<li>Includes(Removed)</li>
<li>Neighborhood Notifications(Removed)</li>
<li>Project Info Macros(Removed)</li>
</ol>


<hr />

<h2><a name='links'></a>Links</h2>

<p>Most URLs will automatically be turned into links. To be explicit, just write it like this:</p>

<pre><code>&lt;http://someurl&gt;  
&lt;somebbob@example.com&gt;
</code></pre>

<p>Output:</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/11/30/simple-guide-for-markdown/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/11/java-performance-tunning-tips/">Java Performance Tuning Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-11T20:59:44+08:00" pubdate data-updated="true">Nov 11<span>th</span>, 2013</time>
        
           | <a href="/blog/2013/11/11/java-performance-tunning-tips/#disqus_thread"
             data-disqus-identifier="http://www.iovi.com/blog/2013/11/11/java-performance-tunning-tips/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The first version is completed on 2013.11.10 21:55, the main content is from <a href="http://www.exforsys.com/tutorials/j2ee/performance-tuning-of-java-applications.html">here</a>, thanks to the origin author.</p>

<p>Ever since the first version of Java Technology hit the streets, performance has been an important issue for Java developers. Java has improved dramatically and continually but, performance tuning is very essential to get the best results, especially when we think of J2EE applications.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/11/11/java-performance-tunning-tips/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/31/best-practices-to-improve-performance-in-JDBC/">Best Practices to Improve Performance in JDBC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-31T14:54:53+08:00" pubdate data-updated="true">Oct 31<span>st</span>, 2013</time>
        
           | <a href="/blog/2013/10/31/best-practices-to-improve-performance-in-JDBC/#disqus_thread"
             data-disqus-identifier="http://www.iovi.com/blog/2013/10/31/best-practices-to-improve-performance-in-JDBC/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The 1st version is completed on 2013.10.22 20:38, the main content is from <strong><em><a href="http://alumnus.caltech.edu/~chamness/JDBC_Tuning.pdf">Performance Tuning for the JDBC API</a></em></strong>.</p>

<p>The 2nd version is completed on 2013.11.22 21:18, which modified completely, the main content is from <strong><em><a href="http://www.precisejava.com/javaperf/j2ee/JDBC.htm">Best practices to improve performance in JDBC</a></em></strong>, this is a great article about JDBC tuning.</p>

<p>This post is dedicated to illustrate techniques for optimizing JDBC API-based calls from the Java platform. As a result of this presentation, you will:</p>

<ul>
<li>Design better JDBC implementations</li>
<li>Recognize potential performance bottlenecks</li>
<li>Reduce cost during development</li>
</ul>


<h2>Agenda</h2>

<ol>
<li><a href="#why">Why optimize?</a></li>
<li><a href="#steps">Basic Steps to Write a JDBC Program.</a>

<ol>
<li><a href="#driver">Choosing the right Driver</a></li>
<li><a href="#connection">Optimization with Connection</a></li>
<li><a href="#statement">Optimization with Statement</a></li>
<li><a href="#result_set">Optimization with ResultSet</a></li>
<li><a href="#sql_query">Optimization with SQL Query</a></li>
</ol>
</li>
<li><a href="#other_means">Other Means of Optimization.</a></li>
<li><a href="#key_points">Key Points</a></li>
</ol>


<h2><a name='why'></a>Why Optimize?</h2>

<ul>
<li>On average, a web request performs 4 database queries.</li>
<li>Experience has shown that database calls are typical performance bottleneck.</li>
<li>Bad JDBC can overwhelm the database.</li>
</ul>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/10/31/best-practices-to-improve-performance-in-JDBC/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/21/optimistic-and-pessimistic-locking/">Optimistic and Pessimistic Locking</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-21T21:40:48+08:00" pubdate data-updated="true">Oct 21<span>st</span>, 2013</time>
        
           | <a href="/blog/2013/10/21/optimistic-and-pessimistic-locking/#disqus_thread"
             data-disqus-identifier="http://www.iovi.com/blog/2013/10/21/optimistic-and-pessimistic-locking/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Locking Introduction</h2>

<p>This article talks about serveral ways of doing locking. It starts with concurrency problems and then discusses about 2 ways of doing optimistic locking. As optimistic locking does not solve the concurrency issues from roots, it introduces pessimistic locking. It then moves ahead to explain how isolation levels can help us implement pessimistic locking. Each isolation level is explained with sample demonstration to make concepts clearer.</p>

<h2>Why do we need locking?</h2>

<p>In multi-user environment it&rsquo;s possible that multiple users can update the same record at the same time causing confusion between users. This issue is termed as concurrency.</p>

<h2>How can we solve concurrency problems?</h2>

<p>Concurrency problems can be solved by implementing proper &ldquo;Locking strategy&rdquo;. Locks prevent action on a resource to be performed when some other resource is already performing some action on it.</p>

<h2>Optimistic Locking</h2>

<p>As the name suggests &ldquo;optimistic&rdquo; it assumes that multiple transaction will work without affecting each other. In other words no locks are enforced while doing optimistic locking. The transaction just verifies that no other transaction has modified the data. In case of modification the transaction is rolled back.</p>

<h3>How does optimistic lock work?</h3>

<p>You can implement optimistic locking by numerous ways but the fundamental to implement optimistic locking remains same. It&rsquo;s a 4 step process as shown below:</p>

<ol>
<li>Record the current timestamp.</li>
<li>Start changing the values.</li>
<li>Before updating check whether anyone else has changed the values by checking the old time stamp and new time stamp or the old value and the current value in database.</li>
<li>If it&rsquo;s not equal rollbacks or else commit.</li>
</ol>


<p><img src="/images/upload/optimistic_locking.jpg" alt="optimistic_locking" /></p>

<pre><code>update tbl_items set itemname='itemname' where CurrentTimestamp='OldTimeStamp'

update tbl_items set itemname=@itemname where itemname=@OldItemNameValue
</code></pre>

<h2>Pessimistic Locking</h2>

<p>But it looks like by using optimistic locking concurrency problems are not really solved?Yes, you said right. By using optimistic locking you only detect the concurrency problem. To solve concurrency issues from the roots itself we need to use pessimistic locking. Optimistic is like prevention while pessimistic locking is actually the cure.
Pessimistic locking assumes that concurrency/collision issues will happen so a lock is placed on the records and then data is updated.</p>

<h3>How can we do pessimistic locking?</h3>

<p>We can do pessimistic locking by specifying &ldquo;IsolationLevel&rdquo; in SQL Server stored procedures, ADO.NET level or by using transaction scope object, in java the JDBC Connection.</p>

<h3>What kind of locks can be acquired by using pessimistic locking?</h3>

<p>There are 4 kinds of locks you can acquire Shared, Exclusive, Update and intent. The first two are actual locks while the other two are hybrid locks and marker. Correspondingly, in SQL there are 4 kinds of transaction isolation level, below is a simple table which shows when to use them and what locks they put.</p>

<table>
<thead>
<tr>
<th align="center">Isolation Level      </th>
<th align="center">  Read                    </th>
<th align="center">Update     </th>
<th align="center">Insert</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Read Uncommitted     </td>
<td align="center">  Reads data which is yet not committed.  </td>
<td align="center">Allowed    </td>
<td align="center">Allowed</td>
</tr>
<tr>
<td align="center">Read Committed ( Default)</td>
<td align="center">  Reads data which is committed.      </td>
<td align="center">Allowed    </td>
<td align="center">Allowed</td>
</tr>
<tr>
<td align="center">Repeatable Read      </td>
<td align="center">  Reads data which is committed.      </td>
<td align="center">Not Allowed    </td>
<td align="center">Allowed</td>
</tr>
<tr>
<td align="center">Serializable         </td>
<td align="center">  Reads data which is committed.      </td>
<td align="center">Not Allowed    </td>
<td align="center">Not Allowed</td>
</tr>
</tbody>
</table>


<p>More details are covered in this post<a href="/blog/2013/10/11/optimal-isolation-level/">Optimal Isolation Level</a>;</p>

<h2>References:</h2>

<p><a href="http://www.codeproject.com/Articles/114262/6-ways-of-doing-locking-in-NET-Pessimistic-and-opt#Solution%20number%202:-%20Use%20timestamp%20data%20type">6 ways of doing locking in .NET (Pessimistic and optimistic)</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/11/optimal-isolation-level/">Optimal JDBC Transaction Isolation Level</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-11T16:09:47+08:00" pubdate data-updated="true">Oct 11<span>th</span>, 2013</time>
        
           | <a href="/blog/2013/10/11/optimal-isolation-level/#disqus_thread"
             data-disqus-identifier="http://www.iovi.com/blog/2013/10/11/optimal-isolation-level/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Choose optimal isolation level</h2>

<p>Isolation level represent how a database maintains data integrity against the problems like dirty reads, phantom reads and non-repeatable reads which can occur due to concurrent transactions. java.sql.Connection interface provides  methods and constants to avoid the above mentioned problems by setting different isolation levels.</p>

<pre><code>public interface Connection {
    public static final int  TRANSACTION_NONE                 = 0
    public static final int  TRANSACTION_READ_COMMITTED       = 2
    public static final int  TRANSACTION_READ_UNCOMMITTED     = 1
    public static final int  TRANSACTION_REPEATABLE_READ      = 4
    public static final int  TRANSACTION_SERIALIZABLE         = 8
    int    getTransactionIsolation();
    void   setTransactionIsolation(int isolationlevelconstant);
}
</code></pre>

<p>You can get the existing isolation level with getTransactionIsolation() method and set the isolation level with setTransactionIsolation(int isolationlevelconstant) by passing above constants to this method.
The following table describes isolation level against the problem that it prevents :</p>

<table>
<thead>
<tr>
<th align="center">Transaction Level       </th>
<th align="center"> Dirty reads   </th>
<th align="center">Non  Repeatable reads  </th>
<th align="center"> Phantom reads </th>
<th align="center">Performance impact</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">TRANSACTION_NONE        </td>
<td align="center"> N/A       </td>
<td align="center"> N/A           </td>
<td align="center"> N/A       </td>
<td align="center"> FASTEST</td>
</tr>
<tr>
<td align="center">TRANSACTION_READ_UNCOMMITED </td>
<td align="center"> YES       </td>
<td align="center"> YES           </td>
<td align="center"> YES       </td>
<td align="center"> FASTEST</td>
</tr>
<tr>
<td align="center">TRANSACTION_READ_COMMITED   </td>
<td align="center"> NO        </td>
<td align="center"> YES           </td>
<td align="center"> YES       </td>
<td align="center"> FAST</td>
</tr>
<tr>
<td align="center">TRANSACTION_REPEATABLE_READ </td>
<td align="center"> NO        </td>
<td align="center"> NO            </td>
<td align="center"> YES       </td>
<td align="center"> MEDIUM</td>
</tr>
<tr>
<td align="center">TRANSACTION_SERIALIZABLE    </td>
<td align="center"> NO        </td>
<td align="center"> NO            </td>
<td align="center"> NO        </td>
<td align="center"> SLOW</td>
</tr>
</tbody>
</table>


<br/>


<ul>
<li>YES means that the Isolation level does not prevent the problem</li>
<li>NO means that the Isolation level prevents the problem</li>
</ul>


<p>By setting isolation levels, you are having an impact on the performance as mentioned in the above table. Database use read and write locks to control above isolation levels. Let us have a look at each of these problems and then look at the impact on the performance.</p>

<h3>Dirty read problem :</h3>

<p>The following figure illustrates Dirty read problem  :</p>

<p> <img src="/images/upload/dirty_read.gif" alt="dirty_read" /></p>

<pre><code>Step 1:    Database row has PRODUCT = A001 and PRICE = 10
Step 2:    Connection1 starts  Transaction1 (T1) .
Step 3:    Connection2 starts  Transaction2 (T2) .
Step 4:    T1 updates PRICE =20 for PRODUCT = A001
Step 5:    Database has now PRICE = 20 for PRODUCT = A001
Step 6:    T2 reads PRICE = 20 for PRODUCT = A001
Step 7:    T2 commits transaction
Step 8:    T1 rollbacks the transaction because of some problem
</code></pre>

<p>The problem is that T2 gets wrong PRICE=20 for PRODUCT = A001 instead of 10 because of uncommitted read.Obviously it is very dangerous in critical transactions if you read inconsistent data. If you  are sure about not accessing data concurrently  then you can allow this problem by setting TRANSACTION_READ_UNCOMMITED or TRANSACTION_NONE that in turn improves performance otherwise you have to use TRANSACTION_READ_COMMITED to avoid this problem.</p>

<h3>Unrepeatable read problem :</h3>

<p>The following figure illustrates Unrepeatable read problem  :</p>

<p><img src="/images/upload/unrepeatable_read.gif" alt="unrepeatable_read" /></p>

<pre><code>Step 1:    Database row has PRODUCT = A001 and PRICE = 10
Step 2:    Connection1 starts  Transaction1 (T1) .
Step 3:    Connection2 starts  Transaction2 (T2) .
Step 4:    T1 reads PRICE =10 for PRODUCT = A001
Step 5:    T2 updates PRICE = 20 for PRODUCT = A001
Step 6:    T2 commits transaction
Step 7:    Database row has PRODUCT = A001 and PRICE = 20
Step 8:    T1 reads PRICE = 20 for PRODUCT = A001
Step 9:    T1 commits transaction
</code></pre>

<p>Here the problem is that Transaction1 reads 10 first time and reads 20 second time but it is supposed to be 10 always whenever it reads a record in that transaction. You can control this problem by setting isolation level as TRANSACTION_REPEATABLE_READ(setting for which one? Of course both).</p>

<h3>Phantom read problem :</h3>

<p>The following figure illustrates Phantom read problem  :</p>

<p><img src="/images/upload/phantom_read.gif" alt="phantom_read" /></p>

<pre><code>Step 1:    Database has a row PRODUCT = A001 and COMPANY_ID = 10
Step 2:    Connection1 starts  Transaction1 (T1) .
Step 3:    Connection2 starts  Transaction2 (T2) .
Step 4:    T1 selects a row with a condition SELECT PRODUCT WHERE COMPANY_ID = 10
Step 5:    T2 inserts a row with a condition INSERT PRODUCT=A002  WHERE COMPANY_ID= 10
Step 6:    T2 commits transaction
Step 7:    Database has 2 rows with that condition
Step 8:    T1 select again with a condition SELECT PRODUCT WHERE COMPANY_ID=10 and gets 2 rows instead of 1 row
Step 9:    T1 commits transaction
</code></pre>

<p>Here the problem is that T1 gets 2 rows instead of 1 row up on selecting the same condition second time. You can control this problem by setting isolation level as <code>TRANSACTION_SERIALIZABLE</code></p>

<h2>Choosing a right isolation level for your program:</h2>

<p>Choosing a right isolation level for your program depends upon your application&rsquo;s requirement. In single application itself the requirement generally changes, suppose if you write a program for searching a product catalog from your database then you can easily choose <code>TRANSACTION_READ_UNCOMMITED</code> because you need not worry about the problems that are mentioned above, some other program can insert records at the same time, you don&rsquo;t have to bother much about that insertion. Obviously this improves performance significantly.</p>

<p>If you write a critical program like bank or stocks analysis program where you want to control all of the above mentioned problems, you can choose TRANSACTION_SERIALIZABLE for maximum safety. Here it is the tradeoff between the safety and performance. Ultimately we need safety here.
If you don&rsquo;t have to deal with concurrent transactions your application, then the best choice is <code>TRANSACTION_NONE</code> to improve performance.
Other two isolation levels need good understanding of your requirement. If your application needs only committed records, then <code>TRANSACTION_READ_COMMITED</code> isolation is the good choice. If your application needs to read a row exclusively till you  finish your work, then <code>TRANSACTION_REPEATABLE_READ</code> is the best choice.
Note: Be aware of your database server&rsquo;s support for these isolation levels. Database servers may not support all of these isolation levels. Oracle server supports only two isolation levels, <code>TRANSACTION_READ_COMMITED</code> and <code>TRANSACTION_SERIALIZABLE</code> isolation level, default isolation level is <code>TRANSACTION_READ_COMMITED</code>.</p>

<h2>References</h2>

<ul>
<li><a href="http://www.precisejava.com/javaperf/j2ee/JDBC.htm#JDBC102">Best practices to improve performance in JDBC</a></li>
<li><a href="http://www.codeproject.com/Articles/114262/6-ways-of-doing-locking-in-NET-Pessimistic-and-opt#Solution%20number%202:-%20Use%20timestamp%20data%20type">6 ways of doing locking in .NET (Pessimistic and optimistic)</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/06/short-list-of-mysql-commands/">Short List of MySQL Commands</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-06T14:50:01+08:00" pubdate data-updated="true">Sep 6<span>th</span>, 2013</time>
        
           | <a href="/blog/2013/09/06/short-list-of-mysql-commands/#disqus_thread"
             data-disqus-identifier="http://www.iovi.com/blog/2013/09/06/short-list-of-mysql-commands/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><p>The first version is completed on 2013.12.22 21:38, the main content is from <strong><em><a href="http://www.bios.niu.edu/johns/bioinform/mysql_commands.htm">here</a></em></strong>, thanks to the origin author.</p></li>
<li><p>The second version is updated on 2013.12.27 8:59, Backup tool is added, the complementary part is mainly from <strong><em><a href="http://webcheatsheet.com/sql/mysql_backup_restore.php">here</a></em></strong>, thanks to the origin author.</p></li>
</ul>


<h2>Conventions used here:</h2>

<ul>
<li>MySQL keywords are shown in CAPS</li>
<li>User-specified names are in small letters</li>
<li>Optional items are enclosed in square brackets [ ]</li>
<li>Items in parentheses must appear in the command, along with the parentheses</li>
<li>Items that can be repeated as often as desired are indicated by an ellipsis &hellip;</li>
</ul>


<h2>Quoting in MySQL Statements</h2>

<ul>
<li>Don&rsquo;t quote database, table, or column names</li>
<li>Don&rsquo;t quote column types or modifiers</li>
<li>Don&rsquo;t quote numerical values</li>
<li>Quote (single or double) non-numeric values</li>
<li>Quote file names and passwords</li>
<li>Usernames are NOT quoted in GRANT or REVOKE statements, but they are quoted in other statements.</li>
</ul>


<h2>General Commands</h2>

<ul>
<li><p><code>USE database_name</code><br/>
Change to specific database. You need to change to some database when you first connect to MySQL.</p></li>
<li><p><code>SHOW DATABASES</code><br/>
Lists all MySQL databases on the system.</p></li>
<li><p><code>SHOW TABLES [FROM database_name]</code><br/>
Lists all tables from the current database or from the database given in the command.</p></li>
<li><p><code>DESCRIBE table_name</code>;<code>SHOW FIELDS FROM table_name</code>;<code>SHOW COLUMNS FROM table_name</code>
These commands all give a list of all columns (fields) from the given table, along with column type and other info.</p></li>
<li><p><code>SHOW INDEX FROM table_name</code>
Lists all indexes from this tables.</p></li>
<li><p><code>SET PASSWORD=PASSWORD('new_password')</code><br/>
Allows the user to set his/her own password.</p></li>
</ul>


<h2>Table Commands</h2>

<ul>
<li><p><code>CREATE TABLE table_name (create_clause1, create_clause2, ...)</code></p>

<ul>
<li>Creates a table with columns as indicated in the create clauses.</li>
<li>create_clause: column name followed by column type, followed optionally by modifiers. For example, &ldquo;gene_id INT      AUTO_INCREMENT PRIMARY KEY&rdquo; (without the quotes) creates a column of type integer with the modifiers described below.</li>
<li>create_clause modifiers

<ul>
<li>AUTO_INCREMENT : each data record is assigned the next sequential number when it is given a NULL value.</li>
<li>PRIMARY KEY : Items in this column have unique names, and the table is indexed automatically based on this column. One column must be the PRIMARY KEY, and only one column may be the PRIMARY KEY. This column should also be NOT NULL.</li>
<li>NOT NULL : No NULL values are allowed in this column: a NULL generates an error message as the data is inserted into the table.</li>
<li>DEFAULT value : If a NULL value is used in the data for this column, the default value is entered instead.</li>
</ul>
</li>
</ul>
</li>
<li><p><code>DROP TABLE table_name</code><br/>
Removes the table from the database. Permanently! So be careful with this command!</p></li>
<li><p><code>ALTER TABLE table_name ADD (create_clause1, create_clause2, ...)</code><br/>
Adds the listed columns to the table.</p></li>
<li><p><code>ALTER TABLE table_name DROP column_name</code><br/>
Drops the listed columns from the table.</p></li>
<li><p><code>ALTER TABLE table_name MODIFY create_clause</code><br/>
Changes the type or modifiers to a column. Using MODIFY means that the column keeps the same name even though its type is altered. MySQL attempts to convert the data to match the new type: this can cause problems.</p></li>
<li><p><code>ALTER TABLE table_name CHANGE column_name create_clause</code>  <br/>
Changes the name and type or modifiers of a column. Using CHANGE (instead of MODIFY) implies that the column is getting a new name.</p></li>
<li><p><code>ALTER TABLE table_name ADD INDEX [index_name] (column_name1, column_name2, ...)</code> or
<code>CREATE INDEX index_name ON table_name (column_name1, column_name2, ...)</code>  <br/>
Adds an index to this table, based on the listed columns. Note that the order of the columns is important, because additional indexes are created from all subsets of the listed columns reading from left to write. The index name is optional if you use ALTER TABLE, but it is necesary if you use CREATE INDEX. Rarely is the name of an index useful (in my experience).</p></li>
</ul>


<h2>Data Commands</h2>

<ul>
<li><p><code>INSERT [INTO] table_name VALUES (value1, value2, ...)</code><br/>
Insert a complete row of data, giving a value (or NULL) for every column in the proper order.</p></li>
<li><p><code>INSERT [INTO] table_name (column_name1, column_name2, ...) VALUES (value1, value2, ...)</code> or
<code>INSERT [INTO] table_name SET column_name1=value1, column_name2=value2, ...</code><br/>
Insert data into the listed columns only. Alternate forms, with the SET form showing column assignments more explicitly.</p></li>
<li><p><code>INSERT [INTO] table_name (column_name1, column_name2, ...) SELECT list_of_fields_from_another_table FROM other_table_name WHERE where_clause</code><br/>
Inserts the data resulting from a SELECT statement into the listed columns. Be sure the number of items taken from the old table match the number of columns they are put into!</p></li>
<li><p><code>DELETE FROM table_name WHERE where_clause</code><br/>
Delete rows that meet the conditions of the where_clause. If the WHERE statement is omitted, the table is emptied, although its structure remains intact.</p></li>
<li><p><code>UPDATE table_name SET column_name1=value1, column_name2=value2, ... [WHERE where_clause]</code><br/>
Alters the data within a column based on the conditions in the where_clause.</p></li>
<li><p><code>LOAD DATA LOCAL INFILE 'path to external file' INTO TABLE table_name</code><br/>
Loads data from the listed file into the table. The default assumption is that fields in the file are separated by tabs, and each data record is separated from the others by a newline. It also assumes that nothing is quoted: quote marks are considered to be part of the data. Also, it assumes that the number of data fields matches the number of table columns. Columns that are AUTO_INCREMENT should have NULL as their value in the file.</p></li>
<li><p><code>LOAD DATA LOCAL INFILE 'path to external file' [FIELDS TERMINATED BY 'termination_character'] [FIELDS ENCLOSED BY 'quoting character'] [LINES TERMINATED BY 'line termination character'] FROM table_name</code><br/>
Loads data from the listed file into the table, using the field termination character listed (default is tab \t), and/or the listed quoting character (default is nothing), and/or the listed line termination chacracter (default is a newline \n).</p></li>
<li><p><code>SELECT column_name1, column_name2, ... INTO OUTFILE 'path to external file' [FIELDS TERMINATED BY 'termination_character'] [FIELDS ENCLOSED BY 'quoting character'] [LINES TERMINATED BY 'line termination character'] FROM table_name [WHERE where_clause]</code><br/>
Allows you to move data from a table into an external file. The field and line termination clauses are the same as for LOAD above. Several tricky features:</p>

<ol>
<li> Note the positions of the table_name and where_clause, after the external file is given.</li>
<li> You must use a complete path, not just a file name. Otherwise MySQL attempts to write to the directory where the database is stored, where you don&rsquo;t have permission to write.</li>
<li> The user who is writing the file is &lsquo;mysql&rsquo;, not you! This means that user &lsquo;mysql&rsquo; needs permission to write to the directory you specify. The best way to do that is to creat a new directory under your home directory, then change the directory&rsquo;s permission to 777, then write to it. For example: mkdir mysql_output, chmod 777 mysql_output.</li>
</ol>
</li>
</ul>


<h2>Privilege Commands</h2>

<p>Most of the commands below require MySQL root access</p>

<ul>
<li><p><code>GRANT USAGE ON *.* TO user_name@localhost [IDENTIFIED BY 'password']</code><br/>
Creates a new user on MySQL, with no rights to do anything. The IDENTIFED BY clause creates or changes the MySQL password, which is not necessarily the same as the user&rsquo;s system password. The @localhost after the user name allows usage on the local system, which is usually what we do; leaving this off allows the user to access the database from another system. User name NOT in quotes.</p></li>
<li><p><code>GRANT SELECT ON *.* TO user_name@localhost</code><br/>
In general, unless data is supposed to be kept private, all users should be able to view it. A debatable point, and most databases will only grant SELECT privileges on particular databases. There is no way to grant privileges on all databses EXCEPT specifically enumerated ones.</p></li>
<li><p><code>GRANT ALL ON database_name.* TO user_name@localhost</code><br/>
Grants permissions on all tables for a specific database (database_name.*) to a user. Permissions are for: ALTER, CREATE, DELETE, DROP, INDEX, INSERT, SELECT, UPDATE.</p></li>
<li><p><code>FLUSH PRIVILEGES</code><br/>
Needed to get updated privileges to work immediately. You need RELOAD privileges to get this to work.</p></li>
<li><p><code>SET PASSWORD=PASSWORD('new_password')</code><br/>
Allows the user to set his/her own password.</p></li>
<li><p><code>REVOKE ALL ON [database_name.]* FROM user_name@localhost</code><br/>
Revokes all permissions for the user, but leaves the user in the MySQL database. This can be done for all databases using &ldquo;ON *&rdquo;, or for all tables within a specific databse, using &ldquo;ON database_name.*&rdquo;.</p></li>
<li><p><code>DELETE FROM mysql.user WHERE user='user_name@localhost'</code><br/>
Removes the user from the database, which revokes all privileges. Note that the user name is in quotes here.</p></li>
<li><p><code>UPDATE mysql.user SET password=PASSWORD('my_password') WHERE user='user_name'</code><br/>
Sets the user&rsquo;s password. The PASSWORD function encrypts it; otherwise it will be in plain text.</p></li>
<li><p><code>SELECT user, host, password, select_priv, insert_priv, shutdown_priv, grant_priv FROM mysql.user</code><br/>
A good view of all users and their approximate privileges. If there is a password, it will by an encrytped string; if not, this field is blank. Select is a very general privlege; insert allows table manipulation within a database; shutdown allows major system changes, and should only be usable by root; the ability to grant permissions is separate from the others.</p></li>
<li><p><code>SELECT user, host, db, select_priv, insert_priv, grant_priv FROM mysql.db</code><br/>
View permissions for individual databases.</p></li>
</ul>


<h2>Backup Tool</h2>

<h3>Back up From the Command Line (using mysqldump)</h3>

<p>If you have shell or telnet access to your web server, you can backup your MySQL data by using the mysqldump command. This command connects to the MySQL server and creates an SQL dump file. The dump file contains the SQL statements necessary to re-create the database. Here is the proper syntax:</p>

<ul>
<li><p><code>mysqldump --opt -u [uname] -p[pass] [dbname] &gt; [backupfile.sql]</code><br/>
This command will backup the &lsquo;Tutorials&rsquo; database into a file called tut_backup.sql which will contain all the SQL statements needed to re-create the database.</p></li>
<li><p><code>mysqldump -u root -p Tutorials php_tutorials asp_tutorials &gt; tut_backup.sql</code><br/>
With mysqldump command you can specify certain tables of your database you want to backup. For example, to back up only php_tutorials and asp_tutorials tables from the &lsquo;Tutorials&rsquo; database accomplish the command below. Each table name has to be separated by space.</p></li>
<li><p><code>mysqldump -u root -p --databases Tutorials Articles Comments &gt; content_backup.sql</code><br/>
Sometimes it is necessary to back up more that one database at once. In this case you can use the &mdash;database option followed by the list of databases you would like to backup. Each database name has to be separated by space.</p></li>
<li><p><code>mysqldump -u root -p --all-databases &gt; alldb_backup.sql</code><br/>
If you want to back up all the databases in the server at one time you should use the &mdash;all-databases option. It tells MySQL to dump all the databases it has in storage.</p></li>
</ul>


<p>The mysqldump command has also some other useful options:</p>

<ol>
<li><p><code>--add-drop-table</code>: Tells MySQL to add a D<code>ROP TABLE</code> statement before each <code>CREATE TABLE</code> in the dump.</p></li>
<li><p><code>--no-data</code>: Dumps only the database structure, not the contents.</p></li>
<li><p><code>--add-locks</code>: Adds the <code>LOCK TABLES</code> and <code>UNLOCK TABLES</code> statements you can see in the dump file.</p></li>
</ol>


<p>The mysqldump command has advantages and disadvantages. The advantages of using mysqldump are that it is simple to use and it takes care of table locking issues for you. The disadvantage is that the command locks tables. If the size of your tables is very big mysqldump can lock out users for a long period of time.</p>

<h3>Back up your MySQL Database with Compress</h3>

<ul>
<li><p><code>mysqldump -u [uname] -p[pass] [dbname] | gzip -9 &gt; [backupfile.sql.gz]</code>
If your mysql database is very big, you might want to compress the output of mysqldump. Just use the mysql backup command below and pipe the output to gzip, then you will get the output as gzip file.</p></li>
<li><p><code>gunzip [backupfile.sql.gz]</code><br/>
If you want to extract the .gz file, use the command above:</p></li>
<li><p><code>Restoring your MySQL Database</code><br/>
Above we backup the Tutorials database into tut_backup.sql file. To re-create the Tutorials database you should follow two steps:</p>

<ol>
<li> Create an appropriately named database on the target machine</li>
<li> Load the file using the mysql command:</li>
<li> $ mysql -u [uname] -p[pass] [db_to_restore] &lt; [backupfile.sql]</li>
</ol>
</li>
</ul>


<p>Have a look how you can restore your tut_backup.sql file to the Tutorials database.</p>

<ul>
<li><p>To restore compressed backup files you can do the following:<br/>
gunzip &lt; [backupfile.sql.gz] | mysql -u [uname] -p[pass] [dbname]</p></li>
<li><p>If you need to restore a database that already exists, you&rsquo;ll need to use mysqlimport command. The syntax for mysqlimport is as follows:<br/>
mysqlimport -u [uname] -p[pass] [dbname] [backupfile.sql]</p></li>
</ul>


<h2>Operations over Web with PHPMyAdmin</h2>

<ul>
<li><p>It is assumed that you have phpMyAdmin installed since a lot of web service providers use it. To backup your MySQL database using PHPMyAdmin just follow a couple of steps:</p>

<ol>
<li> Open phpMyAdmin.</li>
<li> Select your database by clicking the database name in the list on the left of the screen.</li>
<li> Click the Export link. This should bring up a new screen that says View dump of database (or something similar).</li>
<li> In the Export area, click the Select All link to choose all of the tables in your database.</li>
<li> In the SQL options area, click the right options.</li>
<li> Click on the Save as file option and the corresponding compression option and then click the &lsquo;Go&rsquo; button. A dialog box should appear prompting you to save the file locally.</li>
</ol>
</li>
<li><p>Restoring your database is easy as well as backing it up. Make the following:</p>

<ol>
<li> Open phpMyAdmin.</li>
<li> Create an appropriately named database and select it by clicking the database name in the list on the left of the screen. If you would like to rewrite the backup over an    1. existing database then click on the database name, select all the check boxes next to the table names and select Drop to delete all existing tables in the database.</li>
<li> Click the SQL link. This should bring up a new screen where you can either type in SQL commands, or upload your SQL file.</li>
<li> Use the browse button to find the database file.</li>
<li> Click Go button. This will upload the backup, execute the SQL commands and re-create your database.</li>
</ol>
</li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/11/30/simple-guide-for-markdown/">Markdown Syntax Guide</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/11/java-performance-tunning-tips/">Java Performance Tuning Tips</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/31/best-practices-to-improve-performance-in-JDBC/">Best Practices to Improve Performance in JDBC</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/21/optimistic-and-pessimistic-locking/">Optimistic and Pessimistic Locking</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/11/optimal-isolation-level/">Optimal JDBC Transaction Isolation Level</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Sunny -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sunnycomes';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
